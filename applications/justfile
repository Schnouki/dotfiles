default: obsidian vivaldi-stable

prepare FILE:
    cp "/usr/share/applications/{{FILE}}.desktop" "{{FILE}}.desktop"

add_args FILE +ARGS:
    sed -i 's/^\(Exec=.*\)/\1 {{ARGS}}/g' "{{FILE}}.desktop"

electron_wayland FILE:
    just add_args "{{FILE}}" --enable-features=UseOzonePlatform --ozone-platform=wayland

electron_scaling FILE:
    just add_args "{{FILE}}" --force-device-scale-factor=1.25

obsidian: (prepare "obsidian")
    just electron_scaling obsidian

vivaldi-stable: (prepare "vivaldi-stable")
    sed -i "s!/usr/bin/vivaldi-stable!${HOME}/bin/vivaldi-stable!g" vivaldi-stable.desktop
    just electron_wayland vivaldi-stable

clean:
    rm -f obsidisan.desktop vivaldi-stable.desktop
